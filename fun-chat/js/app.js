(()=>{"use strict";var e,t;!function(e){e.USER_LOGIN="USER_LOGIN",e.USER_LOGOUT="USER_LOGOUT",e.USER_ACTIVE="USER_ACTIVE",e.USER_INACTIVE="USER_INACTIVE",e.USER_EXTERNAL_LOGIN="USER_EXTERNAL_LOGIN",e.USER_EXTERNAL_LOGOUT="USER_EXTERNAL_LOGOUT",e.ERROR="ERROR"}(e||(e={})),function(e){e.UpdateUser="UpdateUser",e.UpdateUserForMessages="UpdateUserForMessages",e.UpdateMessage="UpdateMessage",e.UpdateMessagesHistory="UpdateMessagesHistory",e.UpdatePage="UpdatePage",e.UpdateUsersActive="UpdateUsersActive",e.UpdateUsersInactive="UpdateUsersInactive",e.UpdateModalState="UpdateModalState"}(t||(t={}));const s=new class{constructor(){Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{page:"login",user:{id:"",type:"",payload:{user:{login:"",password:""}}},userForMessages:{login:"",password:"",isLogined:!1},message:"",messageID:"",messagesHistory:[],chatFieldHint:"Select the user to send the message...",usersActive:[],usersInactive:[],modalStateHidden:!0}}),Object.defineProperty(this,"updateMessageID",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.messageID=e}}),Object.defineProperty(this,"updateMessagesHistory",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.messagesHistory=e,window.dispatchEvent(new CustomEvent(t.UpdateMessagesHistory,{bubbles:!0,detail:{}}))}}),Object.defineProperty(this,"updateMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.message=e,window.dispatchEvent(new CustomEvent(t.UpdateMessage,{bubbles:!0,detail:{message:e,user:this.state.userForMessages}}))}}),Object.defineProperty(this,"updateUserForMessages",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.userForMessages=e,window.dispatchEvent(new CustomEvent(t.UpdateUserForMessages,{bubbles:!0,detail:{user:e}}))}}),Object.defineProperty(this,"updateModalState",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.modalStateHidden=e,window.dispatchEvent(new CustomEvent(t.UpdateModalState,{bubbles:!0,detail:{}}))}}),Object.defineProperty(this,"updateUsersActive",{enumerable:!0,configurable:!0,writable:!0,value:e=>{e.payload&&e.payload.users&&(this.state.usersActive=e.payload.users),window.dispatchEvent(new CustomEvent(t.UpdateUsersActive,{bubbles:!0,detail:{}}))}}),Object.defineProperty(this,"updateUsersInactive",{enumerable:!0,configurable:!0,writable:!0,value:e=>{e.payload&&e.payload.users?this.state.usersInactive=e.payload.users:this.state.usersInactive=[],window.dispatchEvent(new CustomEvent(t.UpdateUsersInactive,{bubbles:!0,detail:{}}))}}),Object.defineProperty(this,"updatePage",{enumerable:!0,configurable:!0,writable:!0,value:e=>{this.state.page=e,window.location.hash=e,window.dispatchEvent(new CustomEvent(t.UpdatePage,{bubbles:!0,detail:{}}))}}),Object.defineProperty(this,"updateUser",{enumerable:!0,configurable:!0,writable:!0,value:(e,s)=>{null!==this.state.user.payload&&(this.state.user.payload.user.login=e,this.state.user.payload.user.password=s,window.dispatchEvent(new CustomEvent(t.UpdateUser,{bubbles:!0,detail:{}})))}}),Object.defineProperty(this,"getMessageID",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.messageID}),Object.defineProperty(this,"getMessagesHistory",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.messagesHistory}),Object.defineProperty(this,"getUserForMessages",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.userForMessages}),Object.defineProperty(this,"getModalState",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.modalStateHidden}),Object.defineProperty(this,"getUsersActive",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.usersActive??[]}),Object.defineProperty(this,"getUsersInactive",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.usersInactive??[]}),Object.defineProperty(this,"getPage",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.page}),Object.defineProperty(this,"getUser",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.user}),Object.defineProperty(this,"getState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{console.log(this.state)}})}};class n{init(){const e=this.draw();return this.addEventListeners(),e}}const a=new class{constructor(e){Object.defineProperty(this,"storageKeyPrefix",{enumerable:!0,configurable:!0,writable:!0,value:e})}getStorageKey(e){return`${this.storageKeyPrefix}_${e}`}saveData(e,t){const s=this.getStorageKey(e);sessionStorage.setItem(s,JSON.stringify(t))}getData(e){const t=this.getStorageKey(e),s=sessionStorage.getItem(t);return s?JSON.parse(s):null}getUserFromStorage(e){const t=this.getData(e);return t||null}addData(e,t){const s=this.getStorageKey(e),n=sessionStorage.getItem(s),a=n?JSON.parse(n):null;if(a){const e=[...a,...t];sessionStorage.setItem(s,JSON.stringify(e))}else sessionStorage.setItem(s,JSON.stringify(t))}clearData(){sessionStorage.clear()}removeData(e){const t=this.getStorageKey(e);sessionStorage.removeItem(t)}}("letanatol");class i extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("section"),this.container.classList.add("footer")}draw(){return this.container.innerHTML='\n      <div class="footer__row">\n        <ul class="footer__list">\n          <li class="footer__item">\n            <a href="https://github.com/letanatol/" target="_blank" class="footer__link">\n              <img src="../../../assets/images/content/github_svg.svg" alt="Logo GitHub" width="30" height="30">letanatol\n            </a>\n          </li>\n          <li class="footer__item">\n            <strong class="contacts__bold">2024</strong>\n          </li>\n          <li class="footer__item">\n            <a href="https://rs.school/courses/javascript-mentoring-program" target="_blank" class="footer__link">\n              <img src="../../../assets/images/content/RS_School-svg.svg" alt="Logo RS School" width="60" height="40">\n            </a>\n          </li>\n        </ul>\n      </div>\n    ',this.container}addEventListeners(){}}class o extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("section"),this.container.classList.add("header")}draw(){const e=a.getUserFromStorage("user");return e&&e.password&&(this.container.innerHTML=`\n      <div class="header__user-name"> User: \n        <span id="userName">${e.login}</span>\n      </div>\n      <h1>Fun Chat</h1>\n      <button class="button header__button-about" id="about">About</button>\n      <button class="button header__button-logout" id="logout">Logout</>\n    `),this.container}addEventListeners(){}}class r extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputSearch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("chat-users"),this.inputSearch=document.createElement("input"),this.inputSearch=document.createElement("input"),this.inputSearch.placeholder="Search..."}draw(){const e=document.createElement("ul");e.classList.add("users-list");const t=s.getUsersActive(),n=a.getUserFromStorage("user"),i=a.getUserFromStorage("userForMessages"),o=i?.login;if(!n||!n.login)return e;i&&i.login||console.log("No active user for message"),t.forEach((t=>{const{login:s}=t;if(s!==n.login){const t=document.createElement("li");t.classList.add("user-row"),s===o&&t.classList.add("user__for-message"),t.innerHTML=`\n            <div class="user-status active"></div>\n            <label class="user-login">${s}</label>\n          `,e.append(t)}}));return s.getUsersInactive().forEach((t=>{const{login:s}=t;if(s!==n.login){const t=document.createElement("li");t.classList.add("user-row"),s===o&&t.classList.add("user__for-message"),t.innerHTML=`\n        <div class="user-status inactive"></div>\n        <label class="user-login">${s}</label>\n      `,e.append(t)}})),this.container.innerHTML="",this.container.append(this.inputSearch,e),this.container}addEventListeners(){window.addEventListener(t.UpdateUsersActive,(()=>{this.draw()})),window.addEventListener(t.UpdateUsersInactive,(()=>{this.draw()}))}}class d extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("chat-messages__header")}draw(){return this.container.innerHTML="",this.container}drawWithUser(){const e=a.getUserFromStorage("userForMessages");if(e&&e.login){let t="",s="";e.isLogined?(t="user_active",s="online"):(t="user_inactive",s="offline"),this.container.innerHTML=`\n        <span id="userForMessages">User: ${e.login}</span>\n        <div class=${t}>${s}</div>\n    `}return this.container}addEventListeners(){window.addEventListener(t.UpdateUserForMessages,(()=>{this.drawWithUser()}))}}const l=new class{constructor(){Object.defineProperty(this,"socket",{enumerable:!0,configurable:!0,writable:!0,value:new WebSocket("ws://localhost:4000")}),Object.defineProperty(this,"onMessage",{enumerable:!0,configurable:!0,writable:!0,value:e=>{const t=JSON.parse(e.data);console.log("onMessage",t);const n={id:"",type:"USER_ACTIVE",payload:null},i={id:"",type:"USER_INACTIVE",payload:null};if("USER_LOGIN"===t.type&&t.payload.user?.isLogined&&(s.updatePage("main"),window.location.hash="main",this.wsSend(JSON.stringify(n)),this.wsSend(JSON.stringify(i))),"USER_LOGOUT"===t.type&&(t.payload.user?.isLogined||(s.updatePage("login"),window.location.hash="login")),"USER_ACTIVE"===t.type&&s.updateUsersActive(t),"USER_INACTIVE"===t.type&&s.updateUsersInactive(t),"USER_EXTERNAL_LOGIN"===t.type&&(this.wsSend(JSON.stringify(n)),this.wsSend(JSON.stringify(i))),"USER_EXTERNAL_LOGOUT"===t.type){const e=t.payload.user?.login,o=a.getUserFromStorage("userForMessages");if(e===o?.login){const e={...o,isLogined:!1,login:o?.login||""};a.saveData("userForMessages",e)}const r={...o,isLogined:!1,login:o?.login||""};s.updateUserForMessages(r),this.wsSend(JSON.stringify(n)),this.wsSend(JSON.stringify(i))}if("ERROR"===t.type&&t.payload.error&&console.log(t.payload.error),"MSG_FROM_USER"===t.type&&t.payload.messages&&(s.updateMessagesHistory(t.payload.messages),console.log(t.payload.messages,"data.payload.messages")),"MSG_SEND"===t.type){const e=s.getUserForMessages(),t={id:"",type:"MSG_FROM_USER",payload:{user:{login:""}}};t.payload.user.login=e.login,this.wsSend(JSON.stringify(t))}if("MSG_DELETE"===t.type){const e=s.getUserForMessages(),t={id:"",type:"MSG_FROM_USER",payload:{user:{login:""}}};t.payload.user.login=e.login,this.wsSend(JSON.stringify(t))}}}),Object.defineProperty(this,"onOpen",{enumerable:!0,configurable:!0,writable:!0,value:()=>{s.updateModalState(!0),console.log("socket.readyState",this.socket.readyState),console.log("Connection open"),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage);const e=s.getUser(),t=a.getUserFromStorage("user");t&&t.password&&(e.type="USER_LOGIN",e.payload&&(e.payload.user.login=t.login,e.payload.user.password=t.password,this.wsSend(JSON.stringify(e))))}}),Object.defineProperty(this,"onClose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{console.log("Connection close"),console.log("socket.readyState",this.socket.readyState),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),s.updateModalState(!1),this.waitForConnection((()=>console.log("reconnected")),1e3)}}),this.addListeners(),this.socket.addEventListener("error",(e=>{console.log(e)}))}wsSend(e){this.waitForConnection((()=>{this.socket.send(e)}),1e3)}waitForConnection(e,t){if(this.socket.readyState!==WebSocket.OPEN){if(this.socket.readyState===WebSocket.CLOSED)return console.log("WS closed, reopen"),this.socket=new WebSocket("ws://localhost:4000"),this.socket.addEventListener("error",(e=>{console.log(e)})),this.socket.addEventListener("open",this.onOpen),void setTimeout((()=>{this.waitForConnection(e,t)}),t);console.log("Waiting"),setTimeout((()=>{this.waitForConnection(e,t)}),t)}else e()}addListeners(){this.socket.addEventListener("open",this.onOpen),window.addEventListener(t.UpdateUserForMessages,(e=>{const t={id:"",type:"MSG_FROM_USER",payload:{user:{login:""}}};t.payload.user.login=e.detail.user.login,this.wsSend(JSON.stringify(t))})),window.addEventListener(t.UpdateMessage,(e=>{const t={id:"",type:"MSG_SEND",payload:{message:{to:"",text:""}}};t.payload.message.text=e.detail.message,t.payload.message.to=e.detail.user.login,this.wsSend(JSON.stringify(t))}))}getActiveUsers(){this.wsSend(JSON.stringify({id:"",type:"USER_ACTIVE",payload:null}))}loginUser(e){this.wsSend(JSON.stringify(e))}},c=(e,t)=>{const s=e.querySelector(t);if(!s)throw new TypeError(`Element not found: ${t}`);return s},u=e=>{const t=document.getElementById(e);if(!t)throw new TypeError(`Element not found: ${e}`);return t};class g extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contextMenu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("chat-field__messages"),this.contextMenu=document.createElement("ul")}draw(){this.container.innerHTML="";const e=a.getUserFromStorage("user"),t=s.getMessagesHistory();return 0===t.length&&(this.container.innerHTML="Write your first message..."),t.forEach((t=>{const s=document.createElement("div");s.classList.add("message_container"),s.id=t.id;const n=document.createElement("div");n.classList.add("message__content");const a=document.createElement("div");a.classList.add("message__header");const i=document.createElement("label");i.classList.add("message__sender"),t.from===e?.login?(i.textContent="You",s.classList.add("message__right")):(i.textContent=t.from,s.classList.add("message__left"));const o=document.createElement("label");o.classList.add("message__data");const r=new Date(t.datetime);o.textContent=r.toLocaleString(),a.append(i,o);const d=document.createElement("div");d.classList.add("message__text"),d.textContent=t.text;const l=document.createElement("div");l.classList.add("message__footer");const c=document.createElement("label");c.classList.add("message__edit"),c.textContent=t.status.isEdited?"Edited":"";const u=document.createElement("label");u.classList.add("message__read"),u.textContent=t.status.isReaded?"Readed":"",l.append(c,u),n.append(a,d,l),s.append(n),this.container.appendChild(s)})),this.container.scrollTop=this.container.scrollHeight,this.contextMenu.classList.add("context-menu"),this.contextMenu.id="contextMenu",this.contextMenu.style.display="none",this.contextMenu.innerHTML='\n        <li class="context-menu_item edit-message">Edit</li>\n        <li class="context-menu_item delete-message">Delete</li>\n    ',this.container.append(this.contextMenu),this.container}addEventListeners(){window.addEventListener(t.UpdateMessagesHistory,(()=>{this.draw()})),this.container.addEventListener("contextmenu",(e=>{e.preventDefault();const t=e.target,n=t.closest(".message_container")?.querySelector(".message__sender");if(n&&"You"===n.textContent){this.contextMenu.style.display="block";const n=this.container.getBoundingClientRect(),a=e.pageX-n.left,i=e.pageY-n.top;if(this.contextMenu.style.left=`${a}px`,this.contextMenu.style.top=`${i}px`,t.closest(".message_container")){const e=t.closest(".message_container");if(e){const t=e.id;s.updateMessageID(t)}}}})),this.contextMenu.addEventListener("click",(e=>{const t=e.target;if(t&&t.classList){if(t.classList.contains("delete-message")){const e={id:"",type:"MSG_DELETE",payload:{message:{id:""}}};e.payload.message.id=s.getMessageID(),l.wsSend(JSON.stringify(e))}if(t.classList.contains("edit-message")){const e=s.getMessageID(),t=u(e),n=t.querySelector(".message__text")?.textContent,a=u("chat-field__input"),i=u("chat-field__button");n&&(a.value=n,a.focus(),a.value.trim().length>0?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled"))}}})),window.addEventListener("click",(()=>{this.contextMenu.style.display="none"}))}}class p extends n{constructor(){super(),Object.defineProperty(this,"form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.form=document.createElement("form"),this.form.classList.add("chat-field__form")}draw(){return this.form.innerHTML='\n        <input class="chat-field__input" id="chat-field__input" placeholder="Message..." disabled>\n        <button type="submit" class="button chat-field__button" id="chat-field__button" disabled>Send</button>\n    ',this.form}addEventListeners(){this.form.addEventListener("submit",(e=>{e.preventDefault();const t=c(document.body,".chat-field__input"),n=t.value;s.updateMessage(n),t.value=""})),this.form.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),this.form.dispatchEvent(new Event("submit")))}))}}class h extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("container_chat-page")}draw(){const e=(new o).init(),t=document.createElement("div");t.classList.add("chat__content");const s=(new r).init(),n=document.createElement("div");n.classList.add("chat-messages");const a=(new d).init(),l=(new g).init(),c=(new p).init(),u=(new i).init();return n.append(a,l,c),t.append(s,n),this.container.append(e,t,u),this.container}addEventListeners(){this.container.addEventListener("click",(e=>{const t=e.target;if(!t||!t.classList)return;const n=c(document.body,".chat-field__input"),i=c(document.body,".chat-field__button");if(t.classList.contains("user-row")){document.querySelectorAll(".user-row").forEach((e=>{e.classList.remove("user__for-message")})),t.classList.add("user__for-message"),console.log("target",t);const e=t.querySelector(".user-login");let i=!1;if(t.querySelector(".active")&&(i=!0),t.querySelector(".inactive")&&(i=!1),e){const t=e.textContent;a.saveData("userForMessages",{login:t,isLogined:i}),s.updateUserForMessages({login:t,isLogined:i})}n.removeAttribute("disabled")}n.addEventListener("input",(()=>{n.value.trim().length>0?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}))}))}}class b extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"form",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("container_login-page"),this.form=document.createElement("form"),this.form.classList.add("form_login-page"),this.container.append(this.form),window.location.hash="login"}draw(){return this.form.innerHTML='\n      <fieldset class="fieldset_login-page">\n        <legend>Authorization</legend>\n        <div class="row_login-page">\n          <label>Login</label>\n          <div class="input-wrapper_login-page">\n            <input id="input-login" placeholder="Enter the login" type="text" class="input_login-page" autocomplete="inputLogin">\n          </div>\n        </div>\n        <div class="row_login-page">\n          <label>Password</label>\n          <div class="input-wrapper_login-page">\n            <input id="input-password" placeholder="Enter the password" type="password" class="input_login-page" autocomplete="current-password">\n          </div>\n        </div>\n      </fieldset>\n      <button type="submit" class="submit_login-page">Log in</button>\n      <button type="button" class="about_login-page">About</button>\n',this.container}addEventListeners(){this.form.addEventListener("submit",(e=>{e.preventDefault();const t=u("input-login"),n=t.value,i=u("input-password"),o=i.value;a.saveData("user",{login:n,password:o}),s.updateUser(n,o);const r=s.getUser();r.type="USER_LOGIN",l.wsSend(JSON.stringify(r)),t.value="",i.value=""})),this.form.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),this.form.dispatchEvent(new Event("submit")))}))}}class m extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("main"),a.removeData("userForMessages")}draw(){this.container.innerHTML="";const e=a.getUserFromStorage("user");if(e&&e.password){const e=(new h).init();window.location.hash="main",this.container.append(e)}else{const e=(new b).init();window.location.hash="login",this.container.append(e)}return this.container}drawAbout(){window.location.hash="about",this.container.innerHTML="";const e=document.createElement("div");return e.classList.add("about__page"),e.innerHTML='\n      <h3 class="about__title">Fun Chat</h3>\n      <div class="about__info">FunChat is a lively and interactive messaging application designed to bring through engaging conversations</div>\n      <a class="about__link" href="https://github.com/letanatol/" target="_blank">letanatol</a>\n      <button type="button" class="button__back">Back</button>\n    ',this.container.append(e),this.container}addEventListeners(){window.addEventListener(t.UpdatePage,(()=>{const e=s.getPage();"login"===e&&this.draw(),"about"===e&&this.drawAbout(),"main"===e&&this.draw()})),this.container.addEventListener("click",(e=>{const t=e.target;if(t&&t.classList){if(t.classList.contains("header__button-logout")){const e=s.getUser(),t=a.getUserFromStorage("user");t&&t.password&&(e.type="USER_LOGOUT",e.payload&&(e.payload.user.login=t.login,e.payload.user.password=t.password,l.wsSend(JSON.stringify(e)),a.clearData(),s.updatePage("login")))}t.classList.contains("header__button-about")&&(s.updatePage("about"),this.drawAbout()),t.classList.contains("about_login-page")&&(s.updatePage("about"),this.drawAbout()),t.classList.contains("button__back")&&this.draw()}})),window.addEventListener("hashchange",(()=>{if("#main"===window.location.hash){const e=a.getUserFromStorage("user");if(e&&e.password){this.container.innerHTML="";const e=(new h).init();this.container.append(e)}else{this.container.innerHTML="";const e=(new b).init();this.container.append(e),window.location.hash="login"}}}))}}class v extends n{constructor(){super(),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.container=document.createElement("div"),this.container.classList.add("modal")}draw(){return this.container.innerHTML='\n        <div class="modal-content">\n          <div class="spinner"></div>\n          <p class="game-modal__text">Connecting to the server...</p>\n        </div>\n    ',this.container}addEventListeners(){window.addEventListener(t.UpdateModalState,(()=>{s.getModalState()?this.container.classList.remove("show"):this.container.classList.add("show")}))}}window.addEventListener("hashchange",(()=>{if("#login"===window.location.hash){const e=s.getUser(),t=a.getUserFromStorage("user");t&&t.password&&(e.type="USER_LOGOUT",e.payload&&(e.payload.user.login=t.login,e.payload.user.password=t.password,l.wsSend(JSON.stringify(e)),a.clearData(),s.updatePage("login"))),a.clearData(),s.updatePage("login")}"#about"===window.location.hash&&s.updatePage("about")}));const w=new class{constructor(){const{body:e}=document,t=new m,n=new v;e.addEventListener("click",(()=>{s.getState()})),e.append(t.init(),n.init())}};console.log(w)})();